<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
 <title>Admin Dashboard</title>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
 <style>
   :root {
     --main-color: #002fff;
     --second-color: #00bbff;
     --text-color: #333;
     --bg-gradient: linear-gradient(to right, #002fff, #00bbff);
   }
 
   body {
     margin: 0;
     font-family: 'Poppins', sans-serif;
     background: #f0f4f8;
     color: var(--text-color);
   }
 
   header {
     background: var(--bg-gradient);
     color: white;
     padding: 20px;
     text-align: center;
   }
 
   header h1 {
     margin: 0;
     font-size: 2rem;
   }
 
   .dashboard {
     max-width: 1000px;
     margin: 40px auto;
     padding: 20px;
     background: white;
     border-radius: 15px;
     box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
   }
 
   .dashboard h2 {
     color: var(--main-color);
     margin-bottom: 20px;
   }
 
   .grid {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
     gap: 20px;
   }
 
   .card {
     background: var(--bg-gradient);
     color: white;
     padding: 25px;
     border-radius: 15px;
     text-align: center;
     transition: transform 0.2s ease-in-out;
   }
 
   .card:hover {
     transform: scale(1.05);
   }
 
   .card i {
     font-size: 2rem;
     margin-bottom: 10px;
   }
 
   .logout-btn {
     margin-top: 40px;
     background: red;
     padding: 10px 20px;
     border: none;
     border-radius: 10px;
     color: white;
     cursor: pointer;
     font-size: 1rem;
   }
 
   .logout-btn:hover {
     background: darkred;
   }
 
   .notificationBadge {
 display: none;
}
#notificationList {
 display: none;
 position: absolute;
 top: 50px;
 right: 20px;
 width: 280px;
 background: white;
 border-radius: 12px;
 box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
 z-index: 999;
 overflow: hidden;
 font-family: 'Poppins', sans-serif;
 animation: fadeIn 0.3s ease-in-out;
}
 
#notificationList ul {
 list-style: none;
 margin: 0;
 padding: 0;
}
 
#notificationList li {
 padding: 12px 16px;
 border-bottom: 1px solid #f0f0f0;
 font-size: 14px;
 color: #333;
 transition: background 0.2s ease;
 cursor: default;
}
 
#notificationList li:hover {
 background-color: #f9f9f9;
}
 

   @media (max-width: 600px) {
     header h1 {
       font-size: 1.5rem;
     }
   }
 </style>
</head>
<body>
 
 <header>
   <h1>Securemove Admin Dashboard</h1>
     <div id="notificationContainer" style="position: relative; display: inline-block;">
       <div id="notifArea" style="display: flex; align-items: center; gap: 8px; cursor: pointer; color: white;">
         <div style="position: relative;">
           <i id="notifBell" class="fas fa-bell" style="font-size: 24px;"></i>
           <span id="notificationBadge" style="display: none; position: absolute; top: -6px; right: -6px; background: red; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px;">0</span>
         </div>
         <span style="font-size: 16px;">Notifications</span>
       </div>
</div>


 </header>
 <div id="notificationList" style="display: none; position: absolute; top: 30px; right: 0; background: white; border: 1px solid #ccc; padding: 10px; width: 250px;">
     <ul id="alertsList"></ul>
   </div>
 
 <div class="dashboard">
   <h2>Welcome, Admin</h2>
 <div class="grid">
     
     
     <a href="adminmanagebookings.html" style="text-decoration: none; color: inherit;">
       <div class="card">
         <i class="fas fa-box"></i>
         <p>Manage Bookings</p>
       </div>
     </a>  
 
     <a href="vehicleoptim.html" style="text-decoration: none; color: inherit;">
       <div class="card">
         <i class="fas fa-truck"></i>
         <p>Deliveries</p>
       </div>
     </a>  
     
     <a href="adminwarehousemanage.html" style="text-decoration: none; color: inherit;">
       <div class="card">
         <i class="fas fa-warehouse"></i>
         <p>Manage Storage</p>
       </div>
     </a>  

     <a href="assignkey.html" style="text-decoration: none; color: inherit;">
       <div class="card">
         <i class="fas fa-key"></i>
         <p>Assign Key</p>
       </div>
     </a> 

     <a href="returnkey.html" style="text-decoration: none; color: inherit;">
       <div class="card">
         <i class="fas fa-key"></i>
         <p>Return Key</p>
       </div>
     </a>

     <a href="vehiclemaintenance.html" style="text-decoration: none; color: inherit;">
       <div class="card">
         <i class="fas fa-truck"></i>
         <p>Vehicle Maintenance</p>
       </div>
     </a> 

     <a href="EmergencyAdmin.html" style="text-decoration: none; color: inherit;">
        <div class="card">
          <i class="fas fa-ambulance"></i>
          <p>Emergency Admin</p>
        </div>
      </a>

     <a href="performancereports.html" style="text-decoration: none; color: inherit;">
       <div class="card">
         <i class="fas fa-book"></i>
         <p>Performance Report</p>
       </div>
     </a> 
     <a href="financialreports.html" style="text-decoration: none; color: inherit;">
       <div class="card">
         <i class="fas fa-book"></i>
         <p>Financial Reports</p>
       </div>
     </a> 
 
           <a href="driversubmissions.html" style="text-decoration: none; color: inherit;">
        <div class="card"><i class="fas fa-user-check"></i><p>Driver Submissions</p></div>
      </a>

      <a href="damagedgoodsadmin.html" style="text-decoration: none; color: inherit;">
 <div class="card">
   <i class="fas fa-exclamation-triangle"></i>
   <p>Damaged Goods</p>
 </div>
 </a>
  <a href="financialinfo.html" style="text-decoration: none; color: inherit;">
 <div class="card">
   <i class="fas fa-dollar-sign"></i>
   <p>Financial Info</p>
 </div>
 </a>
    <a href="adminexportdocumentvalidation.html" style="text-decoration: none; color: inherit;">
      <div class="card">
        <i class="fas fa-user-check"></i>
        <p>Document Validation</p>
      </div>
  </a>
  <a href="adminmanageexportbookings.html" style="text-decoration: none; color: inherit;">
      <div class="card">
        <i class="fas fa-box"></i>
        <p>Manage Export Booking</p>
      </div>
  </a>
 
  

     
 
   </div>
   <button class="logout-btn" onclick="logout()">Logout</button>
 </div>
 
 <script type="module">
 
 
 const app = initializeApp(firebaseConfig);
 const db = getDatabase(app);
 
 const ordersRef = ref(db, "Orders");
 const badge = document.getElementById("notificationBadge");
 const alertsList = document.getElementById("alertsList");
 const listContainer = document.getElementById("notificationList");
 
 window.showNotifications = function () {
   const list = document.getElementById("notificationList");
   list.style.display = list.style.display === 'block' ? 'none' : 'block';
 };
 document.getElementById("notifArea").addEventListener("click", showNotifications);


 // Fetch and display orders
 onValue(ordersRef, (snapshot) => {
   alertsList.innerHTML = '';
   let count = 0;
 
   snapshot.forEach((childSnapshot) => {
     const data = childSnapshot.val();
     console.log("Booking found:", data);
 
     // Only show unviewed orders
     if (data.viewedByAdmin === false || data.viewedByAdmin === undefined) {
       console.log("alertsList element:", alertsList);
       const li = document.createElement("li");
       li.textContent = `New booking by ${data.name} on ${data.pickup_date}`;
       alertsList.appendChild(li);
       count++;
     }
   });
   
 
   if (count > 0) {
     badge.style.display = "inline";
     badge.textContent = count;
   } else {
     badge.style.display = "none";
   }
 });
 
 // Toggle notifications
 
 
 // Logout handler
 window.logout = function () {
   alert("Logging out...");
   window.location.href = "index.html";
 };
</script>



</body>
</html>
